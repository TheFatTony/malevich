<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

    <changeSet author="thefattony" id="payment_method_bitcoin-insert-arch-trigger" runOnChange="true">
        <!--<sql splitStatements="false">delimiter GO</sql>-->
        <sql splitStatements="false" stripComments="false" endDelimiter="\n -- //">
            CREATE TRIGGER payment_method_bitcoin_arch_i_trg AFTER INSERT ON payment_method_bitcoin
            FOR EACH ROW
            BEGIN
            INSERT INTO payment_method_bitcoin_arch
            (id, address, wallet, change_date, action_type)
            VALUES
            (NEW.id, NEW.address, NEW.wallet, NOW(), 'I');
            END
        </sql>
        <!--<sql splitStatements="false">delimiter ;</sql>-->
    </changeSet>

    <changeSet author="thefattony" id="payment_method_bitcoin-update-arch-trigger" runOnChange="true">
        <!--<sql splitStatements="false">delimiter GO</sql>-->
        <sql splitStatements="false" stripComments="false" endDelimiter="\n -- //">
            CREATE TRIGGER payment_method_bitcoin_arch_u_trg AFTER UPDATE ON payment_method_bitcoin
            FOR EACH ROW
            BEGIN
            INSERT INTO payment_method_bitcoin_arch
            (id, address, wallet, change_date, action_type)
            VALUES
            (NEW.id, NEW.address, NEW.wallet, NOW(), 'U');
            END
        </sql>
        <!--<sql splitStatements="false">delimiter ;</sql>-->
    </changeSet>

    <changeSet author="thefattony" id="payment_method_bitcoin-delete-trigger" runOnChange="true">
        <!--<sql splitStatements="false">delimiter GO</sql>-->
        <sql splitStatements="false" stripComments="false" endDelimiter="\n -- //">
            CREATE TRIGGER payment_method_bitcoin_d_trg AFTER DELETE ON payment_method_bitcoin
            FOR EACH ROW
            BEGIN
            INSERT INTO payment_method_bitcoin_arch
            (id, address, wallet, change_date, action_type)
            VALUES
            (OLD.id, OLD.address, OLD.wallet, NOW(), 'D');
            END
        </sql>
        <!--<sql splitStatements="false">delimiter ;</sql>-->
    </changeSet>

</databaseChangeLog>