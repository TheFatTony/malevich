<!-- Breadcrumbs -->
<section class="g-brd-bottom g-brd-gray-light-v4 g-py-30">
  <div class="container">
    <div class="d-sm-flex text-center">
      <div class="align-self-center">
        <ul class="u-list-inline">
          <li class="list-inline-item g-mr-5">
            <a class="u-link-v5 g-color-text" routerLink="/main-page">{{'INDEX.MAIN_MENU_ITEM' | translate}}</a>
            <i class="g-color-gray-light-v2 g-ml-5 fa fa-angle-right"></i>
          </li>
          <li class="list-inline-item g-mr-5">
            <a class="u-link-v5 g-color-text" routerLink="/artworks/artworks-list">{{'INDEX.ARTHUNTER_MENU_ITEM' |
              translate}}</a>
            <i class="g-color-gray-light-v2 g-ml-5 fa fa-angle-right"></i>
          </li>
          <li class="list-inline-item g-color-primary">
            <span>{{artworkStock?.artwork?.titleMl[translate.currentLang]}}</span>
          </li>
        </ul>
      </div>

      <div class="align-self-center ml-auto">
        <h1 class="h3 mb-0">{{'INDEX.ARTHUNTER_MENU_ITEM' | translate}}</h1>
      </div>
    </div>
  </div>
</section>
<!-- End Breadcrumbs -->
<!-- Product Description -->

<div class="container g-pt-50 g-pb-100">
  <div *ngIf="artworkStock" class="row">
    <div class="col-lg-7">
      <!-- Carousel -->
      <div class="g-pt-10 g-mb-10">
        <figure>
          <img class="img-fluid w-100" src="{{url}}{{artworkStock?.artwork?.image.url}}" alt="Image Description">
          <span *ngIf="isOwnArtwork"
                class="u-ribbon-v1 g-width-40 g-height-40 g-color-white g-bg-primary g-font-size-15 text-center text-uppercase g-rounded-50x g-top-10 g-right-minus-10 g-px-2 g-py-10"
                ngbTooltip="This is my artwork"
          >
          <i class="icon-education-031 u-line-icon-pro g-font-size-18"></i>
          </span>
        </figure>
      </div>
      <!-- End Carousel -->
    </div>

    <div class="col-lg-5">
      <div class="g-px-20--lg g-pt-20">
        <!-- Product Info -->
        <div class="g-mb-30">
          <h1 class="g-font-weight-300 mb-4">{{artworkStock?.artwork?.titleMl[translate.currentLang]}}</h1>
          <div *ngIf="artworkStock?.artwork?.descriptionMl"
               [innerHTML]="getDescriptionHtml(artworkStock.artwork.descriptionMl[translate.currentLang])"></div>
        </div>
        <!-- End Product Info -->

        <!-- Price -->
        <ng-container *ngIf="tradingAccess.read">
          <div *ngIf="artworkStock.instantPrice" class="g-mb-30">
            <h2 class="g-color-gray-dark-v5 g-font-weight-400 g-font-size-12 text-uppercase mb-2">
              Buy now for
            </h2>

            <a href="javascript:void(0)" (click)="instantPriceClick()">
              <span class="g-color-black g-font-weight-500 g-font-size-30 mr-2">
                  {{artworkStock.instantPrice | number:'1.0-2'}} SQR</span>
            </a>
            <span class="g-color-gray-dark-v5 g-font-size-14" ngbTooltip="1 SQR = 1 EUR" container="body"
                  style="bottom: 15px; position: relative">[?]</span>


          </div>
          <div *ngIf="!artworkStock.instantPrice && artworkStock.lastPrice" class="g-mb-30">
            <h2 class="g-color-gray-dark-v5 g-font-weight-400 g-font-size-12 text-uppercase mb-2">
              Last Price
            </h2>
            <span class="g-color-gray-dark-v4 g-font-weight-500 g-font-size-30 mr-2">
                {{artworkStock.lastPrice | number:'1.0-2'}} SQR</span>
            <span class="g-color-gray-dark-v5 g-font-size-14" ngbTooltip="1 SQR = 1 EUR" container="body"
                  style="bottom: 15px; position: relative">[?]</span>
          </div>
        </ng-container>
        <!-- End Price -->

        <!-- Buttons -->
        <div *ngIf="!placeOrderMode" class="row g-mx-minus-5 g-mb-20">
          <div class="col g-px-5 g-mb-10">
            <button class="btn btn-block u-btn-primary g-font-size-12 text-uppercase g-py-15 g-px-25" type="button"
                    [disabled]="!tradingAccess.write"
                    (click)="placeOrder()">
              {{ placeOrderButtonCaption | translate}}<i
              class="align-middle ml-2 icon-real-estate-089 u-line-icon-pro"></i>
            </button>
          </div>
          <div class="col g-px-5 g-mb-10">
            <button *ngIf="!wishListItem"
                    class="btn btn-block u-btn-outline-black g-brd-gray-dark-v5 g-brd-black--hover g-color-gray-dark-v4 g-color-white--hover g-font-size-12 text-uppercase g-py-15 g-px-25"
                    [disabled]="!tradingAccess.read"
                    type="button" (click)="wishListClick()">
              {{'MAIN.ARTWORK.ADD_TO_WISHLIST' | translate}} <i
              class="align-middle ml-2 icon-medical-022 u-line-icon-pro"></i>
            </button>
            <button *ngIf="wishListItem"
                    class="btn btn-block u-btn-outline-black g-brd-gray-dark-v5 g-brd-black--hover g-color-gray-dark-v4 g-color-white--hover g-font-size-12 text-uppercase g-py-15 g-px-25"
                    [disabled]="!tradingAccess.read"
                    type="button" (click)="wishListClick()">
              {{'MAIN.ARTWORK.REMOVE_FROM_WISHLIST' | translate}} <i
              class="ml-2 g-color-lightred fa fa-heart" style="line-height: 1.5"></i>
            </button>
          </div>
        </div>
        <div *ngIf="placeOrderMode" class="row g-mx-minus-5 g-mb-20">
          <div class="col g-px-5 g-mb-10">
            <mch-order-edit #orderEdit
                            [artworkStock]="artworkStock"
                            [amount]="orderDefaultAmount"
                            [orderType]="isOwnArtwork ? 'ask' : 'bid'"
                            (onOrderPlaced)="onOrderPlaced($event)"
                            (onCancel)="onOrderCanceled()"
            ></mch-order-edit>
          </div>
        </div>
        <!-- End Buttons -->

        <ng-container *ngIf="tradingAccess.read">
          <!-- Nav Tabs -->
          <ul class="nav d-flex justify-content-between g-font-size-12 text-uppercase" role="tablist"
              data-target="nav-1-1-default-hor-left">
            <li class="nav-item g-brd-bottom g-brd-gray-dark-v4">
              <a class="nav-link active g-color-primary--parent-active g-pa-0 g-pb-1" data-toggle="tab"
                 href="#nav-1-1-default-hor-left--3" role="tab">{{"MAIN.ARTWORK.BID" | translate}} /
                {{"MAIN.ARTWORK.ASK"
                | translate}}</a>
            </li>
            <li class="nav-item g-brd-bottom g-brd-gray-dark-v4">
              <a class="nav-link g-color-primary--parent-active g-pa-0 g-pb-1" data-toggle="tab"
                 href="#nav-1-1-default-hor-left--1" role="tab">{{"MAIN.ARTWORK.TRADE_HISTORY" | translate}}</a>
            </li>
          </ul>
          <!-- End Nav Tabs -->

          <!-- Tab Panes -->
          <div id="nav-1-1-default-hor-left" class="tab-content">
            <div class="tab-pane fade show active g-pt-30" id="nav-1-1-default-hor-left--3" role="tabpanel">
              <!-- Shipping Method -->
              <table>
                <thead class="h6 g-brd-bottom g-brd-gray-light-v3 g-color-gray-dark-v3 g-font-size-13">
                <tr>
                  <th class="g-width-300 g-font-weight-500 g-pa-0 g-pb-10">{{"MAIN.ARTWORK.BID" | translate}}</th>
                  <th class="g-width-300 g-font-weight-500 g-pa-0 g-pb-10">{{"MAIN.ARTWORK.ASK" | translate}}</th>
                </tr>
                </thead>
                <tbody>
                <tr class="g-color-gray-dark-v4 g-font-size-12" *ngFor="let placedOrder of placedOrders">
                  <td class="align-top g-py-10" *ngIf="placedOrder.type.id === 'ASK'"></td>
                  <td class="align-top g-py-10" *ngIf="placedOrder.type.id === 'ASK'">
                    <a *ngIf="placedOrder.isOwn"
                       (click)="ownOrderClick()"
                       class="u-tags-v1 g-color-main g-brd-around g-brd-gray-light-v3 g-bg-primary--hover g-brd-primary--hover g-color-white--hover g-rounded-50 g-py-4 g-px-15"
                       ngbTooltip="This is your bid. Click to cancel"
                    >{{placedOrder.amount | number:'1.0-2'}}</a>
                    <a *ngIf="!placedOrder.isOwn"
                       (click)="askClick()"
                       class="u-tags-v1 g-color-main g-brd-around g-brd-gray-light-v3 g-bg-primary--hover g-brd-primary--hover g-color-white--hover g-rounded-50 g-py-4 g-px-15"
                       ngbTooltip="This is sellers offer. Click to buy artwork at this price"
                    >{{placedOrder.amount | number:'1.0-2'}}</a>
                  </td>
                  <td class="align-top g-py-10" *ngIf="placedOrder.type.id === 'BID'">
                    <a *ngIf="placedOrder.isOwn"
                       (click)="ownOrderClick()"
                       class="u-tags-v1 g-color-main g-brd-around g-brd-gray-light-v3 g-bg-primary--hover g-brd-primary--hover g-color-white--hover g-rounded-50 g-py-4 g-px-15"
                       ngbTooltip="This is your bid. Click to cancel"
                    >{{placedOrder.amount | number:'1.0-2'}}</a>
                    <span *ngIf="!placedOrder.isOwn">{{placedOrder.amount | number:'1.0-2'}}</span>
                  </td>
                  <td class="align-top g-py-10" *ngIf="placedOrder.type.id === 'BID'"></td>
                </tr>
                </tbody>
              </table>
              <!-- End Shipping Method -->
            </div>

            <div class="tab-pane fade g-pt-30" id="nav-1-1-default-hor-left--1" role="tabpanel">
              <!-- Shipping Method -->
              <table>
                <thead class="h6 g-brd-bottom g-brd-gray-light-v3 g-color-gray-dark-v3 g-font-size-13">
                <tr>
                  <th class="g-width-300 g-font-weight-500 g-pa-0 g-pb-10">{{"MAIN.ARTWORK.EFFECTIVE_DATE" |
                    translate}}
                  </th>
                  <th class="g-width-300 g-font-weight-500 g-pa-0 g-pb-10">{{"MAIN.ARTWORK.COST" | translate}}</th>
                </tr>
                </thead>
                <tbody>
                <tr class="g-color-gray-dark-v4 g-font-size-12" *ngFor="let tradeHistoryItem of tradeHistory">
                  <td class="align-top g-py-10">{{tradeHistoryItem.effectiveDate | date:'d MMMM yyyy, h:mm a'}}</td>
                  <td class="align-top g-py-10">{{tradeHistoryItem.amount | number:'1.0-2'}} SQR</td>
                </tr>
                </tbody>
              </table>
              <!-- End Shipping Method -->
            </div>
          </div>
          <!-- End Tab Panes -->
        </ng-container>


      </div>
    </div>
  </div>
</div>
<!-- End Product Description -->

<mch-confirm-window #confirmCancel (onOk)="cancelOwnOrder()">
  <p>Are you sure you want to cancel your current order?</p>
</mch-confirm-window>

<mch-confirm-window #confirmInstantBuy (onOk)="instantBuy()">
  <p>Are you sure you want to buy this artwork for {{artworkStock?.instantPrice | number:'1.0-2'}} SQR?</p>
</mch-confirm-window>
